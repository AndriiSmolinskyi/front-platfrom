{"ast":null,"code":"import\"./LessonBtn.scss\";import{useContext,useState,useEffect}from\"react\";import{UserContext}from\"../../../Context/UserContext\";import{HmContext}from\"../../../Context/HmContext\";import axios from'axios';import{apiHost}from\"../../../apiHost\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const LessonBtn=_ref=>{let{lessonId,groupId}=_ref;const{user}=useContext(UserContext);const{hm,setHm}=useContext(HmContext);const[homeworkText,setHomeworkText]=useState(\"\");// Стан для зберігання тексту домашнього завдання\nconst[error,setError]=useState(\"\");// Стан для відображення помилок валідації\nconst handleTextareaChange=event=>{setHomeworkText(event.target.value);setError(\"\");// Скидання помилок при зміні тексту\n};const handleSubmit=()=>{if(homeworkText.trim()===\"\"){setError(\"Поле не може бути порожнім\");}else{sendHm();setHomeworkText(\"\");setError(\"\");}};const sendHm=async()=>{const body={user_id:user.id,group_id:groupId,lesson_number:lessonId,content:homeworkText};try{const response=await axios.post(\"\".concat(apiHost,\"user/sendHomework\"),body);getHmUser();}catch(error){console.error('Помилка при відправкі домашнього завдання',error.response);}};const getHmUser=async()=>{try{const response=await axios.get(\"\".concat(apiHost,\"teacher/getHomeworkByUserAndLessonAndGroup\"),{params:{user_id:user.id,group_id:groupId,lesson_number:lessonId}});const goodHm=response.data;setHm(goodHm);}catch(error){console.error('Помилка при відправкі домашнього завдання',error.response);}};const handleEditHomework=async()=>{const body={id:hm[0].id,content:homeworkText};console.log(homeworkText);try{const response=await axios.put(\"\".concat(apiHost,\"user/editHomework\"),body);getHmUser();}catch(error){console.error('Помилка при редагування домашнього завдання',error.response);}};useEffect(()=>{getHmUser();},[lessonId,groupId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"hm\",children:[hm&&hm.map((hmData,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[hmData.status==\"done\"?/*#__PURE__*/_jsx(\"p\",{className:\"hm__data__text done\",children:\"\\u041F\\u0440\\u0438\\u0439\\u043D\\u044F\\u0442\\u043E\"}):/*#__PURE__*/_jsx(\"p\",{className:\"hm__data__text no\",children:\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u0456\\u0440\\u044F\\u0454\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hm__data__text user_hm\",children:hmData.content}),/*#__PURE__*/_jsx(\"p\",{className:\"hm__data__text feadbeck\",children:\"\\u0424\\u0456\\u0434\\u0431\\u0435\\u043A \\u0456\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0442\\u043E\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"p\",{className:\"hm__data__text\",children:hmData.instructor_feedback})]},index)),/*#__PURE__*/_jsx(\"textarea\",{value:homeworkText,onChange:handleTextareaChange,cols:\"30\",rows:\"10\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),hm&&hm.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:handleEditHomework,children:\"Edit Homework\"}):/*#__PURE__*/_jsx(\"div\",{className:\"button\",onClick:handleSubmit,children:\"Send Homework\"})]});};","map":{"version":3,"names":["useContext","useState","useEffect","UserContext","HmContext","axios","apiHost","jsx","_jsx","jsxs","_jsxs","LessonBtn","_ref","lessonId","groupId","user","hm","setHm","homeworkText","setHomeworkText","error","setError","handleTextareaChange","event","target","value","handleSubmit","trim","sendHm","body","user_id","id","group_id","lesson_number","content","response","post","concat","getHmUser","console","get","params","goodHm","data","handleEditHomework","log","put","className","children","map","hmData","index","status","instructor_feedback","onChange","cols","rows","length","onClick"],"sources":["D:/My course/репа/front-platfrom/src/components/lessons/allLesson/LessonBtn.jsx"],"sourcesContent":["import \"./LessonBtn.scss\";\r\nimport { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../../../Context/UserContext\";\r\nimport { HmContext } from \"../../../Context/HmContext\";\r\nimport axios from 'axios';\r\nimport { apiHost } from \"../../../apiHost\";\r\n\r\nexport const LessonBtn = ({ lessonId, groupId }) => {\r\n    const { user } = useContext(UserContext);\r\n    const { hm, setHm } = useContext(HmContext);\r\n    const [ homeworkText, setHomeworkText] = useState(\"\"); // Стан для зберігання тексту домашнього завдання\r\n    const [ error, setError ] = useState(\"\"); // Стан для відображення помилок валідації\r\n\r\n    const handleTextareaChange = (event) => {\r\n        setHomeworkText(event.target.value);\r\n        setError(\"\"); // Скидання помилок при зміні тексту\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        if (homeworkText.trim() === \"\") {\r\n        setError(\"Поле не може бути порожнім\");\r\n        } else {\r\n            sendHm()\r\n        setHomeworkText(\"\");\r\n        setError(\"\");\r\n        }\r\n    };\r\n\r\n    const sendHm = async () => {\r\n        const body = {\r\n            user_id: user.id,\r\n            group_id: groupId,\r\n            lesson_number: lessonId,\r\n            content: homeworkText\r\n        }\r\n\r\n        try {            \r\n            const response = await axios.post(`${apiHost}user/sendHomework`, body );\r\n            getHmUser()\r\n        } catch (error) {\r\n            console.error('Помилка при відправкі домашнього завдання', error.response); \r\n        }\r\n    };\r\n\r\n    const getHmUser = async () => {\r\n        try {            \r\n            const response = await axios.get(`${apiHost}teacher/getHomeworkByUserAndLessonAndGroup`, {\r\n            params: { user_id: user.id, group_id: groupId, lesson_number: lessonId }\r\n        });\r\n            const goodHm = response.data\r\n            setHm(goodHm)\r\n        } catch (error) {\r\n            console.error('Помилка при відправкі домашнього завдання', error.response); \r\n        }\r\n    };\r\n\r\n\r\n    const handleEditHomework = async () =>{\r\n        const body = {\r\n            id: hm[0].id,\r\n            content: homeworkText\r\n        }\r\n        console.log(homeworkText)\r\n        try {            \r\n            const response = await axios.put(`${apiHost}user/editHomework`, body);\r\n            getHmUser()\r\n        } catch (error) {\r\n            console.error('Помилка при редагування домашнього завдання', error.response); \r\n        }\r\n        \r\n    }\r\n    \r\n    useEffect(() => {       \r\n        getHmUser()\r\n    }, [lessonId, groupId]);\r\n\r\n\r\n    return (\r\n        <div className=\"hm\">\r\n            {hm && hm.map((hmData, index) => (\r\n                <div key={index}>\r\n                    {hmData.status == \"done\" ? <p className=\"hm__data__text done\">Прийнято</p> : <p className=\"hm__data__text no\">Перевіряється</p>}\r\n                    <p className=\"hm__data__text user_hm\">{hmData.content}</p>\r\n                    <p className=\"hm__data__text feadbeck\">Фідбек інструктора</p>\r\n                    <p className=\"hm__data__text\">{hmData.instructor_feedback}</p>\r\n                </div>\r\n            ))}\r\n            <textarea\r\n                value={homeworkText}\r\n                onChange={handleTextareaChange}\r\n                cols=\"30\"\r\n                rows=\"10\"\r\n            ></textarea>\r\n            {error && <p className=\"error\">{error}</p>}\r\n            \r\n            {hm && hm.length > 0 ? \r\n                <div className=\"button\" onClick={handleEditHomework}>\r\n                    Edit Homework\r\n                </div> \r\n                : \r\n                <div className=\"button\" onClick={handleSubmit}>\r\n                    Send Homework\r\n                </div>\r\n            }\r\n            \r\n            \r\n        </div>\r\n    );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}